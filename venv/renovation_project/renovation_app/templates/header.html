{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Square </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,700,900" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'css/open-iconic-bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">

    <link rel="stylesheet" href="{% static 'css/aos.css' %}">

    <link rel="stylesheet" href="{% static 'css/ionicons.min.css' %}">
    
    <link rel="stylesheet" href="{% static 'css/flaticon.css' %}">
    <link rel="stylesheet" href="{% static 'css/icomoon.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
  </head>
  <body>
	  
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand" href="/"><span>Square.</span></a>
	      <button class="navbar-toggler js-fh5co-nav-toggle fh5co-nav-toggle" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>

	      <div class="collapse navbar-collapse" >
	        {% if request.session.ut == 'user' %}
			<ul class="navbar-nav nav ml-auto">
				<li class="nav-item"><a href="/#home" class="nav-link" data-nav-section="home"><span>Home</span></a></li>
				<li class="nav-item"><a href="/#section-counter" class="nav-link" data-nav-section="about"><span>About</span></a></li>
				<li class="nav-item"><a href="/available_designers" class="nav-link" data-nav-section=""><span>Designers</span></a></li>
				<li class="nav-item"><a href="/available_contractors" class="nav-link" data-nav-section=""><span>Contractors</span></a></li>
				<li class="nav-item dropdown">
					<a href="#bookings" class="nav-link" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
					  <span>My Bookings</span>
					</a>
					<ul class="dropdown-menu" aria-labelledby="navbarDropdown">
					  <li><a class="dropdown-item" href="/designer_bookings">Designer Bookings</a></li>
					  <li><a class="dropdown-item" href="/contractor_bookings">Contractor Bookings</a></li>
					</ul>
				  </li>
				  
				<li class="nav-item"><a href="/profile" class="nav-link" data-nav-section=""><span>My Profile</span></a></li>
				<li class="nav-item"><a href="/user_logout" class="nav-link" data-nav-section=""><span>Logout</span></a></li>
				<li class="nav-item cta">
					<a href="" class="nav-link">
						<span style="color: black !important;">Hi, </span> {{ request.user.first_name }}
					</a>
				</li>
	        </ul>
			{% elif request.session.ut == 'admin' %}
			<ul class="navbar-nav nav ml-auto">
				<li class="nav-item"><a href="/#home" class="nav-link" data-nav-section="home"><span>Home</span></a></li>
				<li class="nav-item"><a href="/#section-counter" class="nav-link" data-nav-section="about"><span>About</span></a></li>
				<li class="nav-item"><a href="/view_users" class="nav-link" data-nav-section="about"><span>Users</span></a></li>
				<li class="nav-item"><a href="/view_designers" class="nav-link" data-nav-section="about"><span>Designers</span></a></li>
				<li class="nav-item"><a href="/view_contractors" class="nav-link" data-nav-section="about"><span>Contractors</span></a></li>
				<li class="nav-item"><a href="/user_logout" class="nav-link" data-nav-section="about"><span>Logout</span></a></li>
				<li class="nav-item cta">
					<a href="" class="nav-link">
						<span style="color: black !important;">Hi, </span> Admin
					</a>
				</li>				
			</ul>
			{% elif request.session.ut == 'designer' %}
			<ul class="navbar-nav nav ml-auto">
	          <li class="nav-item"><a href="/#home" class="nav-link" data-nav-section="home"><span>Home</span></a></li>
	          <li class="nav-item"><a href="/#section-counter" class="nav-link" data-nav-section="about"><span>About</span></a></li>
	          <li class="nav-item"><a href="/designer_profile" class="nav-link" data-nav-section="about"><span>My Profile</span></a></li>
	          <li class="nav-item"><a href="/designer_service_requests" class="nav-link" data-nav-section="about"><span>Service Requests</span></a></li>
			  <li class="nav-item"><a href="/user_logout" class="nav-link" data-nav-section="about"><span>Logout</span></a></li>
			  <li class="nav-item cta">
				<a href="" class="nav-link">
					<span style="color: black !important;">Hi, </span> {{ request.user.first_name }}
				</a>
			  </li>
	        </ul>
			{% elif request.session.ut == 'contractor' %}
			<ul class="navbar-nav nav ml-auto">
	          <li class="nav-item"><a href="/#home" class="nav-link" data-nav-section="home"><span>Home</span></a></li>
	          <li class="nav-item"><a href="/#section-counter" class="nav-link" data-nav-section="about"><span>About</span></a></li>
	          <li class="nav-item"><a href="/contractor_profile" class="nav-link" data-nav-section="about"><span>My Profile</span></a></li>
			  <li class="nav-item"><a href="/contractor_service_requests" class="nav-link" data-nav-section="about"><span>Service Requests</span></a></li>
			  <li class="nav-item"><a href="/user_logout" class="nav-link" data-nav-section="about"><span>Logout</span></a></li>
			  <li class="nav-item cta">
				<a href="" class="nav-link">
					<span style="color: black !important;">Hi, </span> {{ request.user.first_name }}
				</a>
			  </li>
	        </ul>
			{% else %}
			<ul class="navbar-nav nav ml-auto">
				<li class="nav-item"><a href="/#home" class="nav-link" data-nav-section="home"><span>Home</span></a></li>
				<li class="nav-item"><a href="/#section-counter" class="nav-link" data-nav-section="about"><span>About</span></a></li>
				<li class="nav-item"><a href="/#projects" class="nav-link" data-nav-section="projects"><span>Projects</span></a></li>
				<li class="nav-item"><a href="/#team" class="nav-link" data-nav-section="team"><span>Team</span></a></li>
				<li class="nav-item"><a href="/#testimony" class="nav-link" data-nav-section="testimony"><span>Testimony</span></a></li>
				<li class="nav-item"><a href="/#blog" class="nav-link" data-nav-section="blog"><span>Blog</span></a></li>
				<li class="nav-item"><a href="/#contact" class="nav-link" data-nav-section="contact"><span>Contact</span></a></li>
				<li class="nav-item"><a href="/user_login" class="nav-link">Login</a></li>
				<li class="nav-item cta"><a href="/#section-counter" class="nav-link">Request a quote</a></li>
  
			</ul>
			{% endif %}
	      </div>
	    </div>
	  </nav>

{% if messages %}
	<script>
		document.addEventListener("DOMContentLoaded", function() {
			{% for message in messages %}
				{% if 'success' in message.tags %}
					alert("✅ Success: {{ message|escapejs }}");
				{% endif %}
				{% if 'er	<li class=ror' in message.tags %}
					alert("❌ Error: {{ message|escapejs }}");
				{% endif %}
			{% endfor %}
		});
	</script>
{% endif %}


<script>
document.addEventListener("DOMContentLoaded", function () {
    let navLinks = document.querySelectorAll(".nav-item:not(.cta) a");

    function setActiveLink() {
        let currentPath = window.location.pathname;
        let currentHash = window.location.hash; // Get hash (e.g., #projects)

        navLinks.forEach(link => {
            link.parentElement.classList.remove("active");

            // Exact match for path-based links (e.g., "/projects", "/user_login")
            if (currentPath === link.pathname && !link.hash) {
                link.parentElement.classList.add("active");
            }

            // Special case for "/user_login" when the path includes "user_login"
            if (link.pathname === "/user_login" && currentPath.includes("user_login")) {
                link.parentElement.classList.add("active");
            }

            // Exact match for hash-based links (e.g., "/#projects")
            if (link.hash && link.hash === currentHash) {
                link.parentElement.classList.add("active");
            }
        });
    }

    // Run on page load and when hash changes
    setActiveLink();
    window.addEventListener("hashchange", setActiveLink);
    window.addEventListener("popstate", setActiveLink);
});
</script>
<!-- Bootstrap Bundle JS (includes both Popper and Bootstrap JS) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
